@model Services.DTOs.CategoryDTO

<div class="modal fade" id="categoryModal" tabindex="-1" role="dialog" aria-labelledby="categoryModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="categoryModalLabel">Create Category</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="createCategoryForm">
                    @Html.AntiForgeryToken()
                    <div class="form-group">
                        <label for="CategoryName">Category Name</label>
                        <input type="text" asp-for="CategoryName" class="form-control" required />
                    </div>
                    <div class="form-group">
                        <label for="CategoryDesciption">Description</label>
                        <textarea asp-for="CategoryDesciption" class="form-control"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="ParentCategoryId">Parent Category</label>
                        <select asp-for="ParentCategoryId" class="form-control" asp-items="ViewBag.ParentCategoryId">
                            <option value="">None</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="IsActive">Active</label>
                        <input type="checkbox" asp-for="IsActive" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveCategory">Save</button>
            </div>
        </div>
    </div>
</div>
<style>
    /* Modal Styling */
    .modal-content {
        border-radius: 10px;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* Header Styling */
    .modal-header {
        background-color: #28a745; /* Màu xanh lá cho Create */
        color: #fff;
        border-bottom: none;
        padding: 20px;
    }

        .modal-header .close {
            color: #fff;
            opacity: 1;
        }

            .modal-header .close:hover {
                opacity: 0.7;
            }

    /* Modal Body */
    .modal-body {
        padding: 20px;
        max-height: 400px; 
        overflow-y: auto; 
    }

        .modal-body .form-group {
            margin-bottom: 1.2rem;
        }

        .modal-body label {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
        }

        .modal-body .form-control {
            border-radius: 5px;
            border: 1px solid #ced4da;
            padding: 10px;
            font-size: 1rem;
            width: 100%;
            margin-top: 5px;
            transition: border 0.3s ease;
        }

            /* Input focus effect */
            .modal-body .form-control:focus {
                border-color: #28a745;
                box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
                outline: none;
            }

        /* Textarea Styling for Description */
        .modal-body textarea {
            height: 120px; 
            resize: vertical; 
        }

        /* Parent Category Dropdown */
        .modal-body select.form-control {
            max-width: 100%;
        }

        /* Checkbox Styling */
        .modal-body input[type="checkbox"] {
            margin-top: 10px;
            margin-right: 10px;
            width: 20px;
            height: 20px;
        }

    /* Modal Footer */
    .modal-footer {
        padding: 15px;
        text-align: right;
        background-color: #f8f9fa;
        border-top: none;
    }

        /* Adjust button width and alignment */
        .modal-footer .btn {
            border-radius: 5px;
            font-size: 1rem;
            padding: 8px 20px; 
            width: auto; 
            margin-left: 10px; 
        }

        .modal-footer .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }

            .modal-footer .btn-secondary:hover {
                background-color: #5a6268;
                border-color: #545b62;
            }

        .modal-footer .btn-primary {
            background-color: #28a745; 
            border-color: #28a745;
        }

            .modal-footer .btn-primary:hover {
                background-color: #218838;
                border-color: #1e7e34;
            }

</style>
<script>
    $(document).ready(function () {
    $('#saveCategory').click(function () {
        $.ajax({
            url: "@Url.Action("Create", "Categories")",
            type: "POST",
            contentType: "application/x-www-form-urlencoded",  // Ensures correct format
            data: $('#createCategoryForm').serialize(),
            success: function (response) {
                if (response.success) {
                    location.reload();
                } else {
                    alert("Validation Errors: " + response.errors.join("\n"));
                }
            },
            error: function (xhr) {
                alert("Error: " + xhr.responseText);
            }
        });
    });
    });
</script>
